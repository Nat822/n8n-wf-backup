{"updatedAt":"2025-08-05T13:19:07.044Z","createdAt":"2025-08-05T11:12:05.857Z","id":"jWiqbb5aLPPaQ7Lt","name":"SOAP","active":false,"isArchived":false,"nodes":[{"parameters":{"pollTimes":{"item":[{"mode":"everyHour"}]},"authentication":"airtableTokenApi","baseId":{"__rl":true,"value":"appilZRRSpKmY6OTJ","mode":"id"},"tableId":{"__rl":true,"value":"tblNQvh7b8rpjhpki","mode":"id"},"triggerField":"audio file","additionalFields":{}},"type":"n8n-nodes-base.airtableTrigger","typeVersion":1,"position":[-440,-20],"id":"6fbc80b2-7fc3-46c3-b15a-46edb022d334","name":"Airtable Trigger","credentials":{"airtableTokenApi":{"id":"Mwb1i03voej07l1G","name":"Airtable club"}}},{"parameters":{"base":{"__rl":true,"value":"appilZRRSpKmY6OTJ","mode":"list","cachedResultName":"Soap","cachedResultUrl":"https://airtable.com/appilZRRSpKmY6OTJ"},"table":{"__rl":true,"value":"tblNQvh7b8rpjhpki","mode":"list","cachedResultName":"voice input","cachedResultUrl":"https://airtable.com/appilZRRSpKmY6OTJ/tblNQvh7b8rpjhpki"},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[-260,-20],"id":"6f5a3676-2bb6-4fdb-bd15-84b8ff31f4e1","name":"Get a record","credentials":{"airtableTokenApi":{"id":"Mwb1i03voej07l1G","name":"Airtable club"}}},{"parameters":{"resource":"audio","operation":"transcribe","options":{}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[-80,-20],"id":"cd31a607-34a7-4f45-a500-2f1cb93589eb","name":"Transcribe a recording","credentials":{"openAiApi":{"id":"IeTZGRwoUTftsBdI","name":"OpenAi account"}}},{"parameters":{"operation":"update","base":{"__rl":true,"value":"appilZRRSpKmY6OTJ","mode":"list","cachedResultName":"Soap","cachedResultUrl":"https://airtable.com/appilZRRSpKmY6OTJ"},"table":{"__rl":true,"value":"tblNQvh7b8rpjhpki","mode":"list","cachedResultName":"voice input","cachedResultUrl":"https://airtable.com/appilZRRSpKmY6OTJ/tblNQvh7b8rpjhpki"},"columns":{"mappingMode":"defineBelow","value":{},"matchingColumns":["id"],"schema":[{"id":"id","displayName":"id","required":false,"defaultMatch":true,"display":true,"type":"string","readOnly":true,"removed":false},{"id":"inputID","displayName":"inputID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"number","readOnly":false,"removed":true},{"id":"patientID","displayName":"patientID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"array","readOnly":false,"removed":true},{"id":"date and time of recording","displayName":"date and time of recording","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":true,"removed":true},{"id":"audio file","displayName":"audio file","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"array","readOnly":false,"removed":true},{"id":"transcription","displayName":"transcription","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"SOAP notes","displayName":"SOAP notes","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"array","readOnly":false,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[140,-20],"id":"f33b9f75-f6b5-4835-bf99-59a8715dec56","name":"Update transcription","credentials":{"airtableTokenApi":{"id":"Mwb1i03voej07l1G","name":"Airtable club"}}},{"parameters":{"promptType":"define","hasOutputParser":true,"options":{"systemMessage":"You are a highly specialized and expert medical AI assistant designed to analyze patient-clinician conversation transcripts. Your primary function is to extract critical medical information and synthesize it into a structured, concise, and clinically relevant summary using the SOAP (Subjective, Objective, Assessment, Plan) method.\n\nYour analysis must be grounded solely in the provided transcript. Do not introduce any information not present in the conversation. Maintain a professional, neutral, and objective tone. Be highly attentive to details, including patient-reported symptoms, timelines, pain descriptions, and any clinician-observed or mentioned findings.\n\nThe output must be a JSON object that adheres strictly to the provided schema. The JSON object will contain four main keys: \"subjective,\" \"objective,\" \"assessment,\" and \"plan.\" Each key will contain a detailed, bulleted list of findings extracted from the transcript.\n\n**Instructions for each section:**\n\n**Subjective (S):**\n- This section must capture all information provided directly by the patient or their proxy.\n- Focus on the patient's chief complaint, history of present illness (HPI), and any other relevant self-reported symptoms.\n- Include direct quotes or paraphrases of the patient's descriptions of pain (e.g., location, quality, severity on a scale if mentioned), duration of symptoms, alleviating/aggravating factors, and any relevant past medical history they mention.\n- Use bullet points to list each piece of information clearly.\n\n**Objective (O):**\n- This section must capture all observable, measurable, and testable data.\n- This includes physical exam findings, lab results, imaging results, or vital signs mentioned by the clinician.\n- If the clinician describes the patient's appearance or demeanor (e.g., \"patient appears well,\" \"in no acute distress\"), include that here.\n- Also, include any information mentioned by the clinician that they have gathered from charts, previous records, or external sources (e.g., \"per chart review, last A1c was...\").\n- Use bullet points to list each piece of information clearly.\n\n**Assessment (A):**\n- This section must contain a concise summary of the patient's condition based on the S and O data.\n- Identify the most likely diagnosis or a list of potential differential diagnoses mentioned by the clinician.\n- If a diagnosis is not explicitly stated, summarize the presenting problem or symptoms.\n- The assessment should be a logical conclusion drawn from the Subjective and Objective findings.\n\n**Plan (P):**\n- This section must outline the next steps and treatment plan.\n- Include all actions, treatments, and prescriptions discussed by the clinician.\n- List any follow-up appointments, referrals, or lab/imaging orders.\n- Also, include any patient education or advice given by the clinician (e.g., \"patient advised to take medication with food\").\n- Use bullet points to list each planned action.\n\nYour final output must be the JSON object, nothing more. Do not add any introductory or concluding text."}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[360,-20],"id":"ce93904a-fb35-4df2-a17b-fd9b148ea3d8","name":"SOAP analysis"},{"parameters":{"model":{"__rl":true,"mode":"list","value":"gpt-4.1-mini"},"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenAi","typeVersion":1.2,"position":[320,180],"id":"a2956b2c-3a9f-428d-b252-8fc4305f4bbd","name":"OpenAI Chat Model","credentials":{"openAiApi":{"id":"IeTZGRwoUTftsBdI","name":"OpenAi account"}}},{"parameters":{"jsonSchemaExample":"{\n  \"subjective\": [\n    \"Patient's chief complaint: [Summarize chief complaint and duration]\",\n    \"History of present illness: [Detailed summary of HPI, including onset, location, character, and severity of symptoms as described by the patient]\",\n    \"Aggravating/alleviating factors: [Factors that make symptoms better or worse]\",\n    \"Relevant past medical history: [Any past conditions mentioned by the patient]\"\n  ],\n  \"objective\": [\n    \"Physical exam findings: [List all observable findings mentioned by the clinician]\",\n    \"Vital signs: [Any vital signs mentioned in the transcript]\",\n    \"Lab/imaging results: [Any results from tests mentioned]\",\n    \"Clinician observations: [e.g., patient's general appearance or demeanor as described by the clinician]\"\n  ],\n  \"assessment\": [\n    \"Primary diagnosis: [The primary diagnosis or condition discussed]\",\n    \"Differential diagnoses: [Any other potential diagnoses considered]\",\n    \"Problem summary: [A concise summary of the patient's core issue based on the S & O data]\"\n  ],\n  \"plan\": [\n    \"Treatment/medications: [New or adjusted medications, including dosage and frequency]\",\n    \"Diagnostic tests: [Any new lab work, imaging, or other tests ordered]\",\n    \"Referrals: [Any specialists the patient is being referred to]\",\n    \"Follow-up: [Instructions for follow-up appointments or contact]\",\n    \"Patient education: [Key advice or instructions given to the patient]\"\n  ]\n}"},"type":"@n8n/n8n-nodes-langchain.outputParserStructured","typeVersion":1.3,"position":[540,180],"id":"9b399118-64e0-410b-abac-62a59f702acd","name":"Structured Output Parser"},{"parameters":{"operation":"create","base":{"__rl":true,"value":"appilZRRSpKmY6OTJ","mode":"list","cachedResultName":"Soap","cachedResultUrl":"https://airtable.com/appilZRRSpKmY6OTJ"},"table":{"__rl":true,"value":"tblHIRLTPP61yhyqB","mode":"list","cachedResultName":"SOAP notes","cachedResultUrl":"https://airtable.com/appilZRRSpKmY6OTJ/tblHIRLTPP61yhyqB"},"columns":{"mappingMode":"defineBelow","value":{"noteID":0},"matchingColumns":[],"schema":[{"id":"noteID","displayName":"noteID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"number","readOnly":false,"removed":false},{"id":"inputID","displayName":"inputID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"array","readOnly":false,"removed":false},{"id":"patientID","displayName":"patientID","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"array","readOnly":false,"removed":false},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"options","options":[{"name":"draft","value":"draft"},{"name":"completed","value":"completed"}],"readOnly":false,"removed":false},{"id":"date of note","displayName":"date of note","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"dateTime","readOnly":false,"removed":false},{"id":"Subjective","displayName":"Subjective","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Objective","displayName":"Objective","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Assessment","displayName":"Assessment","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false},{"id":"Plan","displayName":"Plan","required":false,"defaultMatch":false,"canBeUsedToMatch":true,"display":true,"type":"string","readOnly":false,"removed":false}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.airtable","typeVersion":2.1,"position":[720,-20],"id":"ddbcb492-978e-4035-9b74-19050b33da76","name":"Create a record","credentials":{"airtableTokenApi":{"id":"Mwb1i03voej07l1G","name":"Airtable club"}}}],"connections":{"Airtable Trigger":{"main":[[{"node":"Get a record","type":"main","index":0}]]},"Get a record":{"main":[[{"node":"Transcribe a recording","type":"main","index":0}]]},"Transcribe a recording":{"main":[[{"node":"Update transcription","type":"main","index":0}]]},"Update transcription":{"main":[[{"node":"SOAP analysis","type":"main","index":0}]]},"OpenAI Chat Model":{"ai_languageModel":[[{"node":"SOAP analysis","type":"ai_languageModel","index":0}]]},"Structured Output Parser":{"ai_outputParser":[[{"node":"SOAP analysis","type":"ai_outputParser","index":0}]]},"SOAP analysis":{"main":[[{"node":"Create a record","type":"main","index":0}]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","errorWorkflow":"TVI3MhM0oSkJpiqY"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"versionId":"0b0ee273-251b-4079-934c-620f93371254","triggerCount":0,"shared":[{"updatedAt":"2025-08-05T11:12:05.857Z","createdAt":"2025-08-05T11:12:05.857Z","role":"workflow:owner","workflowId":"jWiqbb5aLPPaQ7Lt","projectId":"zwyEtHn1PnfmNkEl"}],"tags":[]}
